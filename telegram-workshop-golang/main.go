// –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ main
package main

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –ø–∞–∫–µ—Ç–æ–≤
import (
	"fmt" // –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫
	"log" // –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

	tgbotapi "github.com/go-telegram-bot-api/telegram-bot-api" // API Telegram (–¥–æ–±–∞–≤–ª–µ–Ω —Å–∏–Ω–æ–Ω–∏–º tgbotapi)
)

func main() {
	// API –∫–ª—é—á –¥–ª—è Telegram –±–æ—Ç–∞
	bot, err := tgbotapi.NewBotAPI("<KEY>")
	// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –±–æ—Ç—É
	if err != nil {
		// Panic - –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–π –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã
		log.Panic(fmt.Sprintf("Authorized error! Check your API key and connection!\n %s", err))
	} else {
		// –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É–¥–∞–ª–æ—Å—å - –≥–æ–≤–æ—Ä–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –º—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–ª–∏—Å—å
		log.Printf("Authorized on account %s", bot.Self.FirstName)
	}

	/*
		–°–æ–∑–¥–∞–Ω–∏–µ reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
		–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª–∞–≤–∏—à—ã:
		1. –û –±–∞–Ω–∫–µüè¢ - —Ä–∞—Å—Å–∫–∞–∑ –æ –ú–¢–° –ë–∞–Ω–∫–µ
		2. –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—ÇüòÄ - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ú–¢–° –ë–∞–Ω–∫–∞ (http://cb.mtsbank.ru/)
		3. –°–∞–ª–æ–Ωüìç - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ —Å–∞–ª–æ–Ω–∞ –ú–¢–° –ë–∞–Ω–∫–∞ –≤ –ö—É—Ä–≥–∞–Ω–µ (—à–∏—Ä–æ—Ç–∞ = 55.442224, –¥–æ–ª–≥–æ—Ç–∞ = 65.346463)
		4. –ö—É—Ä—Å –≤–∞–ª—é—Çüìà - –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç –∏–∑ –¶–µ–Ω—Ç—Ä–æ–±–∞–Ω–∫–∞ (http://www.cbr.ru/scripts/XML_daily.asp)

	*/

	// TODO: —Å–æ–∑–¥–∞—Ç—å reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É

	// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞
	u := tgbotapi.NewUpdate(0)
	u.Timeout = 60
	updates, err := bot.GetUpdatesChan(u)

	// –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏—à–µ–¥—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–∞—Ç–∞ (–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é updates)
	for update := range updates {
		/*
			–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π
			–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:
			1. /start - –ø—Ä–∏–≤–µ—Ç—Å–≤–∏–µ –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ –∫ –±–æ—Ç—É
			2. /stop - –æ—Ç–ø–∏—Å–∫–∞ –æ—Ç –±–æ—Ç–∞
			3-6. –ö–ª–∞–≤–∏—à–∏ –∏–∑ reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
		*/

		// TODO: —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–∏—à–µ–¥—à–∏—Ö –∫–æ–º–∞–Ω–¥
	}
}
